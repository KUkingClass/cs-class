# 비트마스크

### 비트란?
- 컴퓨터에서 사용되는 데이터의 최소 단위

- 0, 1의 값을 가지고, true / false 의 상태를 나타낸다. (이진법)

  `13 (10진수) → 1101 (2진수)`

<br>

### 비트마스크란?
- 비트을 활용한 기법

- 알고리즘 보다는 테닉 중 하나이다.

<br>

### 비트마스크의 사용

길이가 5인 집합 {0, 1, 2, 3, 4} 이 있다. 

여기서 몇 개를 선택하고 확인해야 하는 상황이다. (즉, 부분집합을 의미)

**boolean 배열**

```java
int[] array1 = [1, 1, 1, 1, 0];
int[] array2 = [1, 1, 0, 1, 0];
int[] array3 = [1, 0, 1, 0, 0];
```

- 많은 메모리를 차지한다.

**비트마스크**

```python
{ 0, 1, 2, 3, 4 } => 11111 => 31
{ 1, 2, 3, 4 } => 11110 => 30
{ 1, 2, 4 } => 10110 => 22
{ 2, 4 } => 10100 => 20
{ 1 } => 00010 => 2
```

- 부분집합을 인덱스처럼 표현할 수 있다.
- 2진수를 10진수로도 표현하여 효율적으로 관리할 수 있다.
- 삽입, 삭제, 조회 → `비트 연산`을 통해 쉽게 제어 가능

<br>

### 비트마스크를 사용하는 이유

- DP나 순열 등, 배열 활용만으로 해결할 수 없는 문제
- 작은 메모리와 빠른 수행시간으로 해결이 가능 (But, 원소의 수가 많지 않아야 함)
- 집합을 배열의 인덱스로 표현할 수 있음

- 코드가 간결해짐

<br>

### 비트 연산

- AND(&) : 대응하는 두 비트가 모두 1일 때, 1 반환

  `1010 & 1111 = 1010`

- OR(|) : 대응하는 두 비트 중 모두 1이거나 하나라도 1일때, 1 반환

  `1010 | 1111 = 1111`

- XOR(^) : 대응하는 두 비트가 서로 다를 때, 1 반환

  `1010 ^ 1111 = 0101`

- NOT(~) : 비트 값 반전하여 반환

  `~1010 = 0101`

- SHIFT(A>>B, A<<B) : 왼쪽 혹은 오른쪽으로 비트 옮겨 반환

  `00001010 << 2 = 101000` `00001010 >> 2 = 000010`

  - 왼쪽 시프트 : `A * 2^B`
  - 오른쪽 시프트 : `A / 2^B`

  ```python
  [왼  쪽] 0001 → 0010 → 0100 → 1000 : 1 → 2 → 4 → 8
  [오른쪽] 1000 → 0100 → 0010 → 0001 : 8 → 4 → 2 → 1
  ```

### 삽입

이진수 10101 에서, i 번째 비트 값을 1로 변경하려고 한다. 

i = 3 인 경우,  `10101` → `11101`  이때 **OR연산을 활용**한다.

  ```
  10101 | 1 << 3
  ```

`1 << 3`은 `1000`이므로 `10101 | 01000`이 되어 `11101`을 만들 수 있다.

### 삭제

반대로 0으로 변경하려면, **AND연산과 NOT 연산을 활용**한다.

  ```
  11101 & ~(1 << 3)
```
`~(1 << 3)`은 `10111`이므로, `11101 & 10111`이 되어 `10101`을 만들 수 있다.

### 조회

i번째 비트가 무슨 값인지 알려면, **AND연산을 활용**한다.

  ```
  10101 & 1 << i
  ```

  ```
  [3번째 비트 값] 10101 & (1 << 3) = 10101 & 01000 → 0
  [4번째 비트 값] 10101 & (1 << 4) = 10101 & 10000 → 10000
  ```
  
결과값이 0 → i번째 비트 값이 0  
반대로 1 → i번째 비트 값이 1

<br>

비트마스크 연습문제 : [백준 2098](https://www.acmicpc.net/problem/2098)

- 모든 도시를 한번씩 방문하고 다시 시작점으로 돌아올 때까지의 최소 거리 비용을 구하는 문제
- 완전 탐색 → 시간 초과 발생
- DP 활용 → 방문 여부를 배열 대신 비트마스크를 활용해 관리
