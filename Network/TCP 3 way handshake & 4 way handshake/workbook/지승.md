# 🤝 TCP Handshake 워크북

## Q1. TCP Handshake과정에서, 연결을 성립할 때와 해제할 때 각각 몇번 handshake가 일어날까요?
* 연결을 성립할 때는 3번, 해제할 때는 4번의 handshake가 발생한다.
## Q2. 그렇다면 두 단계가 왜 차이가 날까요? 
- 연결을 성립할 때와 해제할 때, 해제를 요청받은 쪽에서 왜 성립할 때처럼 SYN, ACK 를 같이 보내는 게 아니고, FIN을 보낸 후에 ACK를 보낼까요?
    * 해제를 요청받은 쪽에서는 해제할 준비가 되지 않았을 수 있기 때문에, 일단 ACK는 보내고 해제할 준비가 되었을 때 FIN을 보낸다.
## Q3. 성립할 때 & 해제할 때 Handshake 과정을 간단하게 설명해보세요.
* 성립
        1. 먼저 클라이언트가 연결을 위해 서버에게 SYN을 보낸다. 
	2. 서버는 클라이언트의 SYN을 받고 연결을 위한 준비를 하고 클라이언트에게 SYN ACK를 보낸다.
	3. 클라이언트는 서버의 SYN ACK를 받고 서버에게 ACK를 보낸다.
* 해제
        1. 연결을 해제하고 싶은 쪽에서 FIN을 보낸다.
	2. 해제 요청을 받은 쪽에서는 우선 FIN에 대한 ACK를 보내고 해제를 준비한다.
	3. 해제 요청을 받은 쪽에서도 해제 준비가 되었다면 FIN을 보낸다.
	4. 해제 요청을 보낸 쪽에서도 ACK를 보낸다.
## Q4. SYN 패킷을 보낼 때 최초의 sequence number를 ISN(Initial sequence number)라고 합니다. ISN은 랜덤으로 선택된다고 했는데요, 랜덤으로 선택하는 이유가 뭘까요? ⭐
* 0부터 순차적으로 사용할 경우, 이전의 연결에서 보낸 패킷으로 인식될 여지가 있고, 매번 0부터 시작할 경우, ISN인 0인 패킷을 가로채 임의의 연결을 할 수 있을 것 같다.
## Q5. Dos 공격 방법 중에, 3-way handshake 과정을 이용한 공격 방식이 있습니다. 랜덤 IP의 클라이언트가 계속해서 3-way handshake의 첫번째  SYN 패킷을 보내는 공격인데요. 이게 왜 문제가 되는 걸까요?
- 공격 이름을 맞춰보세요~
    * SYN flood
    * SYN을 받은 서버는 이에 대한 응답으로 SYN ACK를 보내지만 클라이언트가 ACK를 보내주지 않기 때문에 서버는 타임아웃될 때까지 계속해서 SYN ACK를 보내면서 자원을 낭비하게 된다.
